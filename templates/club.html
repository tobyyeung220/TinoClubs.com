{% extends "base.html" %}
{% set page_title = club.name %}

{% macro tag(text, color="info", margin="m-2", roundedness="rounded-3") %}
<span class="badge {{margin}} text-{{color}} bg-{{color}} bg-opacity-10 border border-{{color}} border-opacity-10 {{roundedness}}">
    {{ text }}
</span>
{% endmacro %}

{% macro person_card(name, role, email, shadow="shadow-sm", roundedness="rounded-pill") %}
{% set available_avatar_bgs = ['primary', 'info', 'danger', 'warning', 'success'] %}
<div class="card {{shadow}} {{roundedness}}" style="border:0px">
    <div class="d-flex align-items-center ps-2">
        <div style="width:60px;height:60px" class="text-center rounded-pill bg-{{available_avatar_bgs|random}}">
            {% if name.split()|length >= 2 %}
            <h3 style="margin-top:23%" class="text-white">{{name.split()[0][0] + name.split()[-1][0]}}</h3>
            {% else %}
            <h3 style="margin-top:23%" class="text-white">{{name.split()[0][0]}}</h3>
            {% endif %}
        </div>
        <div>
            <div class="card-body">
                <small class="text-secondary mb-1">{{ role }}</small>
                <h6 class="card-title mb-0">{{ name }}</h6>
            </div>
        </div>
    </div>
</div>
{% endmacro %}

{% macro social_media(icon, url, text, margin_top="mt-3") %}
<a class="{{margin_top}} px-0 d-flex text-decoration-none" href="{{url}}" target="_blank">
    <div style="width:36px;height:36px"><img src="{{icon}}" class="img-fluid"></div>
    <p class="ms-3 text-primary">{{ text }}</p>
</a>
{% endmacro %}

{% block content %}
<div class="container mt-3 mt-lg-5">
    <div class="row">
        <div class="col-12 col-lg-8">
            <div class="d-flex align-items-center">
                <img src="/static/club/{{club.name.replace(' ', '-')}}.jpg" class="img-fluid rounded-pill img-thumbnail"
                     style="max-width:140px;max-height:140px">
                <div class="ms-5">
                    {% if club.aka %}
                    <p class="text-secondary mb-1">aka. {{ club.aka }}</p>
                    {% endif %}
                    <h1 class="fw-bold gd-text gd-blue">{{ club.name }}</h1>
                </div>
            </div>
            <div class="d-flex mt-4" style="flex-wrap: wrap;">
                {% for t in club.tags %}
                {{ tag(t) }}
                {% endfor %}
            </div>
            <div class="container-fluid px-3 mt-4 text-secondary">
                <p>{{ club.description }}</p>
            </div>
        </div>
        <div class="col-12 col-lg-4">
            <div class="card shadow-sm rounded-3" style="border:0px">
                <div class="card-body">
                    <p class="card-subtitle text-secondary">{{ club.name }} Meets</p>
                    <h5 class="card-title mt-2 gd-text gd-pink-blue">{{ club.meeting_time }} @ {{ club.meeting_location }}</h5>
                </div>
            </div>
            <div class="mt-4 card shadow-sm rounded-3" style="border:0px">
                <div class="card-body">
                    <p class="card-subtitle text-secondary">Reach out to {{ club.name}}</p>
                    {% for media in club.social_medias %}
                    {{ social_media(media.icon_url, media.url, media.text) }}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container mt-4">
    <h4 class="fw-bold gd-text gd-blue">Club Leadership</h4>
    <div class="px-2 row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4">
        {% for person in club.leaderships %}
        <div class="col">
            {{ person_card(person.name, person.role) }}
        </div>
        {% endfor %}
    </div>
</div>


<div class="container mt-3 mt-lg-5">
    <div class="d-flex justify-content-between">
        <h4 class="fw-bold gd-text gd-blue">Other {{club.category.display_name}} Clubs</h4>
        <a href="/explore#{{club.category.value}}" class="text-decoration-none">See More</a>
    </div>
    <div class="mt-3 px-3 px-lg-5 row row-cols-2 row-cols-lg-3 row-cols-xl-4 g-3 g-md-5">
        {% for name in names_of_same_category_clubs %}
        <div class="col">{{ club_card(name) }}</div>
        {% endfor %}
    </div>
</div>
{% endblock %}
